name: Release

on:
  push:
    tags:
      - "*"

jobs:
  release:
    name: Release project ðŸš€
    runs-on: ubuntu-latest
    steps:
      - name: Release project ðŸš€
        uses: tchoupinax/repo-config/shared-actions/steps/golang/goreleaser-release@v0.1.4
        with:
          appId: ${{ secrets.DEPLOY_APP_ID }}
          privateKey: ${{ secrets.DEPLOY_APP_KEY }}

  brew-update:
    name: Update Brew registry ðŸ‘Š
    runs-on: ubuntu-latest
    needs: [release]
    steps:
      - name: Update Brew registry ðŸ‘Š
        uses: tchoupinax/repo-config/shared-actions/dx/update-brew-registry@019d3c58a09a0bc8f52cde9807740ce8e3cf39d7
        with:
          patToken: ${{ secrets.BREW_COMITTER_PAT }}
          formulaPath: gb.rb
